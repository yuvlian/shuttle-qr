<!DOCTYPE html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>Decode</title><script src=https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js></script><script src=https://unpkg.com/htmx.org@2.0.4/dist/htmx.min.js></script><script src=https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js></script><style>body{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#f7f7f7;font-family:sans-serif}.container{background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,.1)}.input-field{margin:10px 0;padding:10px;width:100%;border:1px solid #ddd;border-radius:5px}button{padding:10px 20px;border:none;background-color:#5d9f8c;color:#fff;cursor:pointer;border-radius:5px;transition:background-color .3s ease}button:hover{background-color:#4c8b74}#decoded-data{margin-top:20px;text-align:center}</style><div class=container><h2>Decode</h2><form hx-post=/decode hx-target=#decoded-data hx-trigger=submit id=decode-form><input id=qr-image type=file class=input-field required accept=image/*> <input id=qr-data type=hidden name=qr_data> <input id=secret-key type=password class=input-field required name=secret_key placeholder="Enter secret key"> <button type=submit>Decode QR Code</button></form><div id=decoded-data></div></div><script>document.getElementById("qr-image").addEventListener("change",(function(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=function(){const e=new Image;e.src=a.result,e.onload=function(){const t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.drawImage(e,0,0,e.width,e.height);const n=a.getImageData(0,0,t.width,t.height),d=jsQR(n.data,t.width,t.height);d?document.getElementById("qr-data").value=d.data:alert("Make sure image is valid QRCode")}},a.readAsDataURL(t)}));</script>
